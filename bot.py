import discord
from discord.ext import commands
from discord import app_commands
from discord.ui import View, Button
from flask import Flask
import threading
import os

# ----- –í–µ–±-—Å–µ—Ä–≤–µ—Ä -----
app = Flask('')

@app.route('/')
def home():
    return "–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –±–æ—é!"

def run():
    app.run(host="0.0.0.0", port=int(os.environ.get("PORT", 8080)))

def keep_alive():
    t = threading.Thread(target=run)
    t.start()

# ----- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Discord-–±–æ—Ç–∞ -----
intents = discord.Intents.default()
bot = commands.Bot(command_prefix="!", intents=intents)
tree = bot.tree

EMBED_COLOR = 0x83ff00  # –¶–≤–µ—Ç —Ä–∞–º–∫–∏ —ç–º–±–µ–¥–∞

# ----------- –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—è–≤–∫–∏ -----------
application_embeds = [
    discord.Embed(
        title="**MINECRAFT**",
        description=(
            "**1.** –°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?\n"
            "**2.** –í–∞—à –Ω–∏–∫?\n"
            "**3.** –ö–∞–∫ –¥–æ–ª–≥–æ –≤—ã –∏–≥—Ä–∞–µ—Ç–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ?\n"
            "**4.** –ï—Å—Ç—å –¥–æ–Ω–∞—Ç? –ï—Å–ª–∏ –¥–∞ ‚Äî –∫–∞–∫–æ–π?\n"
            "**5.** –ß–µ–º –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—ã?\n"
            "**6.** –ó–∞—á–µ–º –≤–∞–º –∫–ª–∞–Ω?\n"
            "**7.** –ò–≥—Ä–∞–ª–∏ –ª–∏ –≤—ã –∫–æ–≥–¥–∞-—Ç–æ —Å —á–∏—Ç–∞–º–∏? –ï—Å–ª–∏ –¥–∞ ‚Äî –∫–æ–≥–¥–∞ –∏ –∑–∞—á–µ–º?\n"
            "**8.** –ö–∞–∫–æ–π –±–∞–ª–∞–Ω—Å –∫–æ–π–Ω–æ–≤, –º–æ–Ω–æ–Ω–µ—Ç–æ–∫ –∏ —Å–∞–ø—Ñ–∏—Ä–æ–≤?\n"
            "**9.** –í–∞—à —É—Ä–æ–≤–µ–Ω—å –≤ PvP –∏ PvE (–∏–∑ 10)?\n"
            "**10.** –°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å –≤—ã –∏–≥—Ä–∞–µ—Ç–µ?\n"
            "**11.** –ú–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –æ–±—â–∞—Ç—å—Å—è –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º —á–∞—Ç–µ?\n"
            "**12.** –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**PLANE CRAZY**",
        description=(
            "**1.** –°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?\n"
            "**2.** –í–∞—à –Ω–∏–∫?\n"
            "**3.** –ö–∞–∫ –¥–æ–ª–≥–æ –≤—ã –∏–≥—Ä–∞–µ—Ç–µ? (–¥–Ω–∏, —á–∞—Å—ã)\n"
            "**4.** –°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å –≤—ã –∏–≥—Ä–∞–µ—Ç–µ?\n"
            "**5.** –ó–∞—á–µ–º –≤–∞–º –∫–ª–∞–Ω?\n"
            "**6.** –ß–µ–º –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—ã?\n"
            "**7.** –õ—É—á—à–∏–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ (2‚Äì3 —Å–∫—Ä–∏–Ω–∞)?\n"
            "**8.** –í–∞—à —É—Ä–æ–≤–µ–Ω—å –≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ –∏ PvP (–∏–∑ 10)?\n"
            "**9.** –ú–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –æ–±—â–∞—Ç—å—Å—è –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º —á–∞—Ç–µ?\n"
            "**10.** –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ"
        ),
        color=EMBED_COLOR
    )
]

# ----------- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∞–≤–∏–ª -----------
rules_embeds = [
    discord.Embed(
        title="**–ü–†–ê–í–ò–õ–ê –ß–ê–¢–ê**",
        description=(
            "1. –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è (–º—É—Ç 1 —á–∞—Å)\n"
            "1.1 –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π (–º—É—Ç 2 —á–∞—Å–∞)\n"
            "1.2 –ø–æ—Ä–Ω–æ–≥—Ä–∞—Ñ–∏—è/—à–æ–∫ –∫–æ–Ω—Ç–µ–Ω—Ç (–Ω·¥á  ô …¥sÍú∞·¥°) (–º—É—Ç 3 —á–∞—Å–∞)\n"
            "1.3 –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–º—É—Ç 3 —á–∞—Å–∞)\n"
            "1.4 —Å–ø–∞–º (–º—É—Ç 4 —á–∞—Å–∞)\n"
            "1.5 —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞—Ç–Ω–∏–∫–∞–º–∏/…∏–∏…Ø ·¥Ñ·¥Ñ—ã·¥ß–æ·¥ã (–±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞)\n"
            "1.7 –ø–æ–ø—ã—Ç–∫–∞ –∫—Ä–∞—à–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞)\n"
            "1.8 –≤—ã–ø—Ä–∞—à–∏–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏/–¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ (–º—É—Ç 30 –º–∏–Ω—É—Ç)"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**–û–ë–©–ò–ï –ü–†–ê–í–ò–õ–ê**",
        description=(
            "2. —Ç—Ä–æ–ª–ª–∏–Ω–≥ / –±—É–ª–ª–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–ª–∞–Ω–∞ (–º—É—Ç/–∫–∏–∫)\n"
            "2.1 —à—É—Ç–∫–∏ –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è –Ω–∞–¥ —Ç–µ–º, –∫–µ–º —à—É—Ç—è—Ç (–º—É—Ç/–∫–∏–∫)\n"
            "2.2 –Ω–µ–ø–æ—Å–ª—É—à–∞–Ω–∏–µ —Å—Ç–∞—Ä—à–µ–≥–æ –ø–æ –∑–≤–∞–Ω–∏—é —á–µ–º –≤–∞—Å (–∑–∞–º–µ—á–∞–Ω–∏–µ/–∫–∏–∫)\n"
            "2.3 –∏–≥—Ä–∞ —Å —Å–æ—Ñ—Ç–æ–º (–∫–∏–∫)\n"
            "2..4 –∞—Ñ–∫–∞—à–µ—Ä—Å—Ç–≤–æ (–∫–∏–∫)\n"
            "2.5 —Ç—É–ø–∏–∑–º (–∫–∏–∫)"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**–ü–†–ê–í–ò–õ–ê –ú–ê–ô–ù–ö–†–ê–§–¢–ê**",
        description=(
            "3. –ø–æ–ø—Ä–∞—à–∞–π–Ω–∏—á–µ—Å—Ç–≤–æ (–∑–∞–º–µ—á–∞–Ω–∏–µ/–∫–∏–∫)\n"
            "3.1 –≤–æ—Ä–æ–≤—Å—Ç–≤–æ —Ä–µ—Å–æ–≤ (–∫–∏–∫)\n"
            "3.2 –Ω–∞–≥–ª–æ—Å—Ç—å (–∫–∏–∫)\n"
            "3.3 –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π/–¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π (–∑–∞–º–µ—á–∞–Ω–∏–µ/–∫–∏–∫)"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**–ü–†–ê–í–ò–õ–ê PLANE CRAZY**",
        description=(
            "4. –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à—Ä–µ–¥–µ—Ä–æ–≤ (–∑–∞–º–µ—á–∞–Ω–∏–µ/–∫–∏–∫)\n"
            "4.1 –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–∫ —É —Å–≤–æ–∏—Ö –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–∑–∞–º–µ—á–∞–Ω–∏–µ/–∫–∏–∫)\n"
            "4.2 –±–∏—Ç—å —Å–≤–æ–∏—Ö (–∑–∞–º–µ—á–∞–Ω–∏–µ/–ø–æ–Ω–∏–∂–µ–Ω–∏–µ/–∫–∏–∫)"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**–ü–†–ê–í–ò–õ–ê –ê–î–ú–ò–ù–ò–°–¢–†–ê–¶–ò–ò**",
        description=(
            "5. –º—É—Ç –Ω–µ —É–∫–∞–∑–∞–≤—à–∏ –ø—Ä–∏—á–∏–Ω—É (–∑–∞–º–µ—á–∞–Ω–∏–µ)\n"
            "5.1 –∫–∏–∫/–±–∞–Ω –∑–∞ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ (—Å–Ω—è—Ç–∏–µ —Å –∞–¥–º–∏–Ω–∫–∏)\n"
            "5.2 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏ –≤ —Å–≤–æ–∏—Ö —Ü–µ–ª—è—Ö (—Å–Ω—è—Ç–∏–µ —Å –∞–¥–º–∏–Ω–∫–∏)\n"
            "5.3 –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ–≤–Ω–µ—Ä–∞ (—Å–Ω—è—Ç–∏–µ —Å –∞–¥–º–∏–Ω–∫–∏)\n"
            "5.4 –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (—Å–Ω—è—Ç–∏–µ —Å –∞–¥–º–∏–Ω–∫–∏)\n"
            "5.5 –≤—ã–¥–∞—á–∞ —Ä–æ–ª–∏ –≤—ã—à–µ member-–æ–≤ –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ–≤–Ω–µ—Ä–∞ (—Å–Ω—è—Ç–∏–µ —Å –∞–¥–º–∏–Ω–∫–∏)"
        ),
        color=EMBED_COLOR
    ),
    discord.Embed(
        title="**–ü–†–ê–í–ò–õ–ê –õ–ò–î–ï–†–û–í**",
        description=(
            "6. –æ—Ñ—Ñ–ª–∞–π–Ω/–∞—Ñ–∫ (—Å–Ω—è—Ç–∏–µ —Å –ª–∏–¥–µ—Ä–∫–∏)\n"
            "6.1 –≤—ã–¥–∞—á–∞ —Ä–æ–ª–µ–π –∫—Ä–æ–º–µ member-–æ–≤ –∏ –≤—ã—à–µ 3 elder-–æ–≤ (–∑–∞–º–µ—á–∞–Ω–∏–µ/—Å–Ω—è—Ç–∏–µ —Å –ª–∏–¥–µ—Ä–∫–∏)"
        ),
        color=EMBED_COLOR
    )
]

# ----------- –ü–∞–≥–∏–Ω–∞—Ç–æ—Ä -----------
class Paginator(View):
    def __init__(self, embeds: list[discord.Embed]):
        super().__init__(timeout=None)
        self.embeds = embeds
        self.current = 0

    @discord.ui.button(label="‚¨ÖÔ∏è", style=discord.ButtonStyle.green)
    async def prev_button(self, interaction: discord.Interaction, button: Button):
        self.current = (self.current - 1) % len(self.embeds)
        await interaction.response.edit_message(embed=self.embeds[self.current], view=self)

    @discord.ui.button(label="‚û°Ô∏è", style=discord.ButtonStyle.green)
    async def next_button(self, interaction: discord.Interaction, button: Button):
        self.current = (self.current + 1) % len(self.embeds)
        await interaction.response.edit_message(embed=self.embeds[self.current], view=self)

# ----------- –ö–æ–º–∞–Ω–¥—ã -----------
@tree.command(name="–∑–∞—è–≤–∫–∞", description="–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏")
async def –∑–∞—è–≤–∫–∞(interaction: discord.Interaction):
    await interaction.response.send_message(embed=application_embeds[0], view=Paginator(application_embeds), ephemeral=False)

@tree.command(name="–ø—Ä–∞–≤–∏–ª–∞", description="–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞")
async def –ø—Ä–∞–≤–∏–ª–∞(interaction: discord.Interaction):
    await interaction.response.send_message(embed=rules_embeds[0], view=Paginator(rules_embeds), ephemeral=False)

# ----------- –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ -----------
@bot.event
async def on_ready():
    print(f"‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ {bot.user}")
    try:
        synced = await tree.sync()
        print(f"üîÅ –°–ª—ç—à-–∫–æ–º–∞–Ω–¥—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: {len(synced)}")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: {e}")

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –±–æ—Ç–∞
keep_alive()
TOKEN = os.getenv("DISCORD_TOKEN")
bot.run(TOKEN)
